## ehseg
[![Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)

This is a python package to do edge-highlight image segmentation.

### Introduction

This package is an implement of Edge-highlight Image Segmentation (EHSEG) to do image segmentation.
It roughly has three steps:
1. First uses mean-shift with iterations to filter the image.
2. Then calculate the average of edge gradient magnitudes generated by multiple methods. The methods include sobel, scharr, roberts,
    prewitt, laplace, and laplace gaussian.
3. Extract skeleton using adaptive threshold.
4. Chop the image using the skeleton.
5. Run region_growing image segmentation from GRASS GIS to finish the segmentation.

The method allows doing segmentation on one image, or a pair of images (e.g. growing-season image and off-season image).

### Usage

The function `ehseg` is the main function to do segmentation. Here is an example of how to use it:

The user must install GRASS GIS first, and provide `GRASSBIN` and `gisbase`.

```
img_paths = ['planet_medres_normalized_analytic_2017-12_2018-05_mosaic_1221-998.tif',
             'planet_medres_normalized_analytic_2018-06_2018-11_mosaic_1221-998.tif']
dst_path = '/Path/for/outputs'
bands = [1, 2, 3, 4]
grassbin = '/Applications/GRASS-7.8.app/Contents/MacOS/Grass.sh'  # for Mac
gisbase = '/Applications/GRASS-7.8.app/Contents/Resources'  # for Mac
n_iter = 3
max_window = 11
window_size_thred = 101
method = 'mean'
threshold = 0.2
similarity = "manhattan"
minsize = 10
iterations = 20
ehseg(img_paths, dst_path, bands, grassbin, gisbase,
      n_iter, max_window, window_size_thred, method,
      threshold, similarity. minsize. iterations)
```

You could check more details about the arguments from function help documentation.
